<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Chat</title>
  </head>
  <body>

    <h1>Chat</h1>
    <textarea id="chat-log" cols="100" rows="20" readonly></textarea>
    <input id="chat-message-input" type="text" size="100"><br>
    <input id="chat-message-submit" type="button" value="Send">

    <script>
        const chatLogElement = document.getElementById("chat-log");
        chatLogElement.value = "";

        const chatMessageInputElement = document.getElementById("chat-message-input");
        chatMessageInputElement.value = "";

        const chatMessageSubmitButtonElement = document.getElementById("chat-message-submit");

        
        const chatSocket = new WebSocket("ws://127.0.0.1:8000/ws/chat/");
        chatSocket.onmessage = (e) => {
            chatLogElement.value += (e.data + "\n");
        };

        chatMessageSubmitButtonElement.addEventListener("click", () => {
            chatSocket.send(chatMessageInputElement.value);
            chatMessageInputElement.value = "";
        });
    </script>

  </body>
</html>
